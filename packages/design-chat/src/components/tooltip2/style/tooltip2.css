@import '../../../styles/variables.css';

:where(.w-tooltip2) {
    --w-tooltip-bg: #fff;
    --w-tooltip-gap: 8px;
}

.w-tooltip2 {
    --w-tooltip-distance: 1em;
    --w-tooltip-size: 1.25em;

    padding: var(--w-space-xs);
    width: fit-content;
    max-width: 15em;
    max-height: calc(anchor-size(block) * 3);
    border-radius: var(--w-radius-medium);
    background-color: light-dark(#fff, #0e1217);
    color: light-dark(#0e1217, #fff);

    position: absolute;
    inset: auto;
    z-index: 0;
    position-anchor: var(--w-anchor);
    position-try-fallbacks: flip-block, flip-inline;

    &::before {
        content: '';
        margin: inherit;
        position: absolute;
        z-index: -1;
        width: var(--w-tooltip-size);
        height: var(--w-tooltip-size);
        background-color: inherit;

        /* arrow-shape */
        clip-path: shape(
            from top left,
            curve to 50% 50% with 50% 10%,
            curve to 100% 0% with 50% 10%
        );
    }

    &.w-tooltip--position-area {
        position-area: var(--w-tooltip__position-area);
    }

    &.w-tooltip--top {
        bottom: calc(anchor(top) + var(--w-tooltip-size) * 0.5);
        justify-self: anchor-center;

        &::before {
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
        }
    }

    &.w-tooltip--top-start {
        bottom: calc(anchor(top) + var(--w-tooltip-size) * 0.5);
        left: calc(anchor(left) - var(--w-tooltip-size) * 0.5);

        &::before {
            top: 100%;
            left: var(--w-tooltip-size);
            transform: translateX(0%);
        }
    }

    &.w-tooltip--top-end {
        bottom: calc(anchor(top) + var(--w-tooltip-size) * 0.5);
        right: calc(anchor(right) - var(--w-tooltip-size) * 0.5);

        &::before {
            top: 100%;
            right: var(--w-tooltip-size);
            transform: translateX(0%);
        }
    }

    &.w-tooltip--bottom {
        top: calc(anchor(bottom) + var(--w-tooltip-size) * 0.5);
        justify-self: anchor-center;

        &::before {
            bottom: calc(100% - 0.5px);
            left: 50%;
            transform: translateX(-50%) rotate(180deg);
        }
    }

    &.w-tooltip--bottom-start {
        top: calc(anchor(bottom) + var(--w-tooltip-size) * 0.5);
        left: calc(anchor(left) - var(--w-tooltip-size) * 0.5);

        &::before {
            bottom: 100%;
            left: var(--w-tooltip-size);
            transform: rotate(180deg);
        }
    }

    &.w-tooltip--bottom-end {
        top: calc(anchor(bottom) + var(--w-tooltip-size) * 0.5);
        right: calc(anchor(right) - var(--w-tooltip-size) * 0.5);

        &::before {
            bottom: 100%;
            right: var(--w-tooltip-size);
            transform: rotate(180deg);
        }
    }

    &.w-tooltip--left {
        right: calc(anchor(left) + var(--w-tooltip-size) * 0.5);
        align-self: anchor-center;

        &::before {
            left: 100%;
            top: 50%;
            transform: translateY(-50%) rotate(270deg);
        }
    }

    &.w-tooltip--left-start {
        right: calc(anchor(left) + var(--w-tooltip-size) * 0.5);
        top: calc(anchor(top) - var(--w-tooltip-size) * 0.5);

        &::before {
            left: 100%;
            top: calc(var(--w-tooltip-size) * 0.5);
            transform: rotate(270deg);
        }
    }

    &.w-tooltip--left-end {
        right: calc(anchor(left) + var(--w-tooltip-size) * 0.5);
        bottom: calc(anchor(bottom) - var(--w-tooltip-size) * 0.5);

        &::before {
            left: 100%;
            bottom: calc(var(--w-tooltip-size) * 0.5);
            transform: rotate(270deg);
        }
    }

    &.w-tooltip--right {
        left: calc(anchor(right) + var(--w-tooltip-size) * 0.5);
        align-self: anchor-center;

        &::before {
            right: 100%;
            top: 50%;
            transform: translateY(-50%) rotate(90deg);
        }
    }

    &.w-tooltip--right-start {
        left: calc(anchor(right) + var(--w-tooltip-size) * 0.5);
        top: calc(anchor(top) - var(--w-tooltip-size) * 0.5);

        &::before {
            right: 100%;
            top: calc(var(--w-tooltip-size) * 0.5);
            transform: rotate(90deg);
        }
    }

    &.w-tooltip--right-end {
        left: calc(anchor(right) + var(--w-tooltip-size) * 0.5);
        bottom: calc(anchor(bottom) - var(--w-tooltip-size) * 0.5);

        &::before {
            right: 100%;
            bottom: calc(var(--w-tooltip-size) * 0.5);
            transform: rotate(90deg);
        }
    }

    /* 动画过渡 */
    &.fade-enter-active,
    &.fade-leave-active {
        transition:
            opacity 0.3s ease,
            transform 0.3s ease;
    }

    &.fade-enter-from,
    &.fade-leave-to {
        opacity: 0;
        transform: scale(0.9);
    }

    /* 缩放过渡 */
    &.scale-enter-active,
    &.scale-leave-active {
        transition:
            opacity 0.2s ease,
            transform 0.2s ease;
    }

    &.scale-enter-from {
        opacity: 0;
        transform: scale(0.8);
    }

    &.scale-leave-to {
        opacity: 0;
        transform: scale(0.8);
    }

    /* 滑动过渡 */
    &.slide-enter-active,
    &.slide-leave-active {
        transition:
            opacity 0.3s ease,
            transform 0.3s ease;
    }

    &.slide-enter-from {
        opacity: 0;
        transform: translateY(-10px);
    }

    &.slide-leave-to {
        opacity: 0;
        transform: translateY(-10px);
    }
}
