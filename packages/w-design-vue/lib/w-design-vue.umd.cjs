(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i["w-design-vue"]={},i.Vue))})(this,function(i,e){"use strict";const j={icon:{type:Object,default:()=>{}},shape:{type:String,dafault:"circle"},size:{type:[Number,String],dafault:""},alt:String,src:String,srcSet:String},A=["src"],H={name:"avatar"},D=e.defineComponent({...H,props:j,setup(t){const n=t,o=e.computed(()=>n.shape??"square"),l=s=>s+"px",r=e.computed(()=>{const{size:s=0}=n;if(typeof s!="number")return;const c=l(s);if(s)return{width:c,height:c,lineHeight:c,fontSize:l(s/2)}}),a=e.computed(()=>({[`avatar__${o}`]:o.value,[`avatar__${n.size}`]:n.size}));return(s,c)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["avatar",a.value]),style:e.normalizeStyle(r.value)},[e.renderSlot(s.$slots,"icon",{},()=>[n.src?(e.openBlock(),e.createElementBlock("img",{key:0,class:"avatar__image",src:n.src},null,8,A)):e.createCommentVNode("",!0)]),e.renderSlot(s.$slots,"default")],6))}}),Ze="",m=t=>(t.install=n=>{n.component(t.name,t)},t),W=Symbol("W_INSTALLED_KEY"),G="1.0.0",R=t=>({version:G,install:o=>{o[W]||(o[W]=!0,t.forEach(l=>o.use(l)))}}),x=m(D),z=Symbol("collpase"),K={activeKey:{type:[String,Number,Array],dafault:""},accordion:Boolean,bordered:{type:Boolean,default:!0}},q={title:{type:[String,Object],dafault:""},name:{type:[String,Number],default:""},disabled:Boolean,readonly:Boolean},Y=["change","update:activeKey"];function F(t,n){return n&&Array.isArray(t)?(console.error('[W] Collapse: "v-model" should not be Array in accordion mode'),!1):!n&&!Array.isArray(t)?(console.error('[W] Collapse: "v-model" should be Array in non-accordion mode'),!1):!0}const X=(t,n)=>{const o=e.ref(),l=s=>{n("change",s),n("update:activeKey",s)},r=(s,c)=>{const{activeKey:d,accordion:p}=t;l(p?s===d?"":s:c?d.concat(s):d.filter(h=>h!==s))},a=s=>{const{activeKey:c,accordion:d}=t;return F(c,d)?d?c===s:c.includes(s):!1};return e.provide(z,{toggle:r,isExpanded:a}),{_ref:o,toggle:r,isExpanded:a}},J={name:"collapse"},Q=e.defineComponent({...J,props:K,emits:Y,setup(t,{expose:n,emit:o}){const l=t,{_ref:r}=X(l,o);return n({ref:r}),(a,s)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"_ref",ref:r,class:e.normalizeClass(["collapse",{"collapse--borderless":!l.bordered}])},[e.renderSlot(a.$slots,"default")],2))}}),ve="";function U(t){const n=e.inject(t,null);if(n){const o=e.getCurrentInstance(),{link:l,unlink:r,internalChildren:a}=n,s=e.computed(()=>a.indexOf(o));return{parent:n,index:s}}return{parent:null,index:e.ref(-1)}}const Z={class:"collapse-transition"},v=e.defineComponent({__name:"collapse-transition",props:{visible:Boolean},setup(t){const n={enter(o){o.style.height="auto";const l=window.getComputedStyle(o).height;o.style.height="0px",o.offsetHeight,o.style.height=l},afterEnter(o){o.style.height=""},leave(o){o.style.height=window.getComputedStyle(o).height,o.offsetHeight,o.style.height="0px"},afterLeave(o){o.style.height=""}};return(o,l)=>(e.openBlock(),e.createBlock(e.Transition,e.toHandlers(n),{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",Z,[e.renderSlot(o.$slots,"default")],512),[[e.vShow,t.visible]])]),_:3},16))}}),et="",ee={class:"collapse__toggle"},te=e.createElementVNode("div",{class:"triangle"},null,-1),oe=["innerHTML"],ne={name:"collapse-item"},se=e.defineComponent({...ne,props:q,setup(t,{expose:n}){const o=t,l=e.ref(),r=e.ref(),{parent:a,index:s}=U(z),c=e.computed(()=>o.name??s.value),d=e.computed(()=>a==null?void 0:a.isExpanded(c.value)),p=e.computed(()=>({"collapse__item--expanded":d.value})),h=(g=!d.value)=>{a==null||a.toggle(c.value,g)},y=()=>{const{disabled:g,readonly:f}=o;!g&&!f&&h()};return n({ref:l}),(g,f)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"_ref",ref:l,class:e.normalizeClass(["collapse__item",p.value])},[e.createElementVNode("div",{class:"collapse__header",onClick:y},[e.createElementVNode("div",ee,[e.renderSlot(g.$slots,"icon",{expanded:d.value},()=>[te])]),e.renderSlot(g.$slots,"title",{},()=>[o.title?(e.openBlock(),e.createElementBlock("div",{key:0,class:"collapse__title",innerHTML:o.title},null,8,oe)):e.createCommentVNode("",!0)])]),e.createVNode(v,{visible:d.value},{default:e.withCtx(()=>[e.createElementVNode("div",{ref_key:"contentRef",ref:r,class:"collapse__content"},[e.renderSlot(g.$slots,"default")],512)]),_:3},8,["visible"])],2))}}),C=m(Q),w=m(se);C.WBreadcrumbItem=w;const le=["xlink:href"],re={name:"w-icon",inheritAttrs:!1},ae=e.defineComponent({...re,props:{prefix:{type:String,default:"icon"},name:{type:String,required:!0},color:{type:String,default:"#333"}},setup(t){const n=t,o=e.computed(()=>`#${n.prefix}-${n.name}`);return(l,r)=>(e.openBlock(),e.createElementBlock("svg",e.mergeProps({class:"w-icon"},l.$attrs,{"aria-hidden":"true"}),[e.createElementVNode("use",{"xlink:href":o.value},null,8,le)],16))}}),tt="",$=m(ae),ce={type:{type:String,dafault:"default"},size:String,icon:{type:String,default:""},attrType:{type:String,default:"button"},outline:String,block:Boolean,loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},ie={click:t=>t instanceof MouseEvent},de=(t,n)=>({_ref:e.ref(),handleClick:r=>{n("click",r)}}),pe=["disabled","autofocus","type"],fe={name:"w-button"},_e=e.defineComponent({...fe,props:ce,emits:ie,setup(t,{expose:n,emit:o}){const l=t,{_ref:r,handleClick:a}=de(l,o);return n({ref:r}),(s,c)=>(e.openBlock(),e.createElementBlock("button",{ref_key:"_ref",ref:r,class:e.normalizeClass(["w-button",[s.type?"w-button__"+s.type:"",s.size?"w-button__"+s.size:"",{"is-disabled":s.disabled,"is-loading":s.loading,"is-plain":s.plain,"is-round":s.round,"is-circle":s.circle}]]),onClick:c[0]||(c[0]=(...d)=>e.unref(a)&&e.unref(a)(...d)),disabled:s.disabled||s.loading,autofocus:s.autofocus,type:s.attrType},[s.loading?(e.openBlock(),e.createBlock(e.unref($),{key:0,class:"w-icon-loading w-icon--left",name:"loading"})):e.createCommentVNode("",!0),s.icon&&!s.loading?(e.openBlock(),e.createBlock(e.unref($),{key:1,class:"w-icon--left",name:s.icon},null,8,["name"])):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default")],10,pe))}}),ot="",B=m(_e),me={key:0,class:"modal-mask"},ue={class:"modal-wrapper"},ge={class:"modal-container"},he={class:"modal-header"},ye={class:"modal-body"},be={class:"modal-footer"},ke=e.defineComponent({name:"w-modal",__name:"modal",props:{modelValue:{type:Boolean,default:!1},to:{type:String,default:"body"}},emits:["close","update:modelValue"],setup(t,{emit:n}){const o=t;return(l,r)=>(e.openBlock(),e.createBlock(e.Teleport,{to:o.to},[e.createVNode(e.Transition,{name:"modal"},{default:e.withCtx(()=>[o.modelValue?(e.openBlock(),e.createElementBlock("div",me,[e.createElementVNode("div",ue,[e.createElementVNode("div",ge,[e.createElementVNode("div",he,[e.renderSlot(l.$slots,"header",{},void 0,!0)]),e.createElementVNode("div",ye,[e.renderSlot(l.$slots,"body",{},void 0,!0)]),e.createElementVNode("div",be,[e.renderSlot(l.$slots,"footer",{},()=>[e.createVNode(e.unref(B),{type:"primary",onClick:r[0]||(r[0]=a=>l.$emit("close"))},{default:e.withCtx(()=>[e.createTextVNode("Comfirm")]),_:1}),e.createVNode(e.unref(B),{type:"default",onClick:r[1]||(r[1]=a=>l.$emit("close"))},{default:e.withCtx(()=>[e.createTextVNode("Cancel")]),_:1})],!0)])])])])):e.createCommentVNode("",!0)]),_:3})],8,["to"]))}}),nt="",S=(t,n)=>{const o=t.__vccOpts||t;for(const[l,r]of n)o[l]=r;return o},L=m(S(ke,[["__scopeId","data-v-400e36db"]])),$e={name:"w-grid"},lt="",Be={class:"w-grid"};function Se(t,n,o,l,r,a){return e.openBlock(),e.createElementBlock("div",Be,[e.renderSlot(t.$slots,"default")])}const Ce=S($e,[["render",Se]]),we={name:"w-grid-item"},Ee={class:"w-grid-item"};function Ve(t,n,o,l,r,a){return e.openBlock(),e.createElementBlock("div",Ee,[e.renderSlot(t.$slots,"default")])}const Ne=S(we,[["render",Ve]]),E=m(Ce),V=m(Ne);E.WItem=V;const Te={separator:{type:String,default:"•"}},We={name:"w-breadcrumb"},xe=e.defineComponent({...We,props:Te,setup(t,{expose:n}){const o=t,l=e.ref();return e.provide("breadcrumb",o),n({ref:l}),(r,a)=>(e.openBlock(),e.createElementBlock("ul",{ref_key:"_ref",ref:l,class:"w-breadcrumb"},[e.renderSlot(r.$slots,"default")],512))}}),rt="",ze={class:"w-breadcrumb__item"},Le={class:"w-breadcrumb__item-separator"},Me={name:"w-breadcrumb-item"},Ie=e.defineComponent({...Me,setup(t){const n=e.inject("breadcrumb",void 0),{separator:o}=e.toRefs(n);return(l,r)=>(e.openBlock(),e.createElementBlock("li",ze,[e.renderSlot(l.$slots,"default"),e.createElementVNode("span",Le,e.toDisplayString(e.unref(o)),1)]))}}),N=m(xe),T=m(Ie);N.WBreadcrumbItem=T;const M=(t,n)=>{const l=(t.$options||{}).propsData||{};return n in l},at="",Pe={name:"w-tag",model:{prop:"visible",event:"close.visible"},props:{color:String,visible:{type:Boolean,default:void 0},closable:{type:Boolean,default:!1}},computed:{tagStyle(){return{backgroundColor:this.color}},hasColor(){const{color:t}=this.$props,n=["primary","success","warning","danger","dark","metal","info","light","brand","focus"];return t?n.includes(t)?"w-tag-"+t:"w-tag-has-color":null}},data(){let t=!0;return M(this,"visible")&&(t=this.visible),{isShow:t}},watch:{visible(t){this.isShow=t}},methods:{setVisible(t,n){this.$emit("close",n),this.$emit("close.visible",t),!n.defaultPrevented&&(M(this,"visible")||(this.isShow=this.visible))},handleClick(t){t.stopPropagation(),this.setVisible(!1,t)}}};function Oe(t,n,o,l,r,a){return e.openBlock(),e.createBlock(e.Transition,null,{default:e.withCtx(()=>[r.isShow?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["w-tag",a.hasColor]),style:e.normalizeStyle(a.tagStyle)},[e.renderSlot(t.$slots,"default"),o.closable?(e.openBlock(),e.createElementBlock("span",{key:0,onClick:n[0]||(n[0]=(...s)=>a.handleClick&&a.handleClick(...s)),class:"w-tag-close"})):e.createCommentVNode("",!0)],6)):e.createCommentVNode("",!0)]),_:3})}const I=m(S(Pe,[["render",Oe]])),je={target:String,header:{type:[String,Object]},content:{type:[String,Object]},actions:{type:[Boolean,Object],default:!0},direction:{type:String,validator(t){return["bottom","top","left","right"].indexOf(t)!==-1},default:"top"},isFirst:Boolean,isLast:Boolean},Ae={next:t=>t instanceof MouseEvent,prev:t=>t instanceof MouseEvent,skip:t=>t instanceof MouseEvent},He=(t,n)=>({_ref:e.ref(),next:s=>{n("next",s)},prev:s=>{n("prev",s)},skip:s=>{n("skip",s)}}),De=["innerHTML"],Ge=["innerHTML"],Re={class:"w-step__actions"},Ke=e.defineComponent({__name:"Step",props:je,emits:Ae,setup(t,{emit:n}){const o=t,{_ref:l,next:r,prev:a,skip:s}=He(o,n),c=e.inject("guide");console.log("guide step",c);const d=e.ref(),p=e.ref(),h=e.computed(()=>c.isLast?"完成":"下一步"),y=()=>{const f=document.body,u=document.documentElement,_=window.pageYOffset||u.scrollTop||f.scrollTop,k=window.pageXOffset||u.scrollLeft||f.scrollLeft,b=p.value.getBoundingClientRect();return{top:b.top+_,left:b.left+k,right:b.left+k+b.width,bottom:b.top+_+b.height}},g=e.computed(()=>{if(p.value=document.querySelector(o.target),p.value&&d.value){const{bottom:u,left:_}=y(),{height:k}=d.value.getBoundingClientRect();console.log("stepStyle",_,k);const b=`${u+20}px`,Ue=`${_}px`;return{top:b,left:Ue}}});return(f,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["w-step",[f.direction]]),ref_key:"stepRef",ref:d,style:e.normalizeStyle(g.value)},[e.renderSlot(f.$slots,"header",{},()=>[f.header?(e.openBlock(),e.createElementBlock("div",{key:0,class:"w-step__header",innerHTML:f.header},null,8,De)):e.createCommentVNode("",!0)]),e.renderSlot(f.$slots,"content",{},()=>[f.content?(e.openBlock(),e.createElementBlock("div",{key:0,class:"w-step__content",innerHTML:f.content},null,8,Ge)):e.createCommentVNode("",!0)]),e.renderSlot(f.$slots,"actions",{},()=>[e.createElementVNode("div",Re,[e.createElementVNode("a",{class:"w-step__actions-btn",href:"javascript:;",onClick:u[0]||(u[0]=_=>e.unref(s)(_))},"跳过"),e.withDirectives(e.createElementVNode("a",{class:"w-step__actions-btn",href:"javascript:;",onClick:u[1]||(u[1]=_=>e.unref(a)(_))},"上一步",512),[[e.vShow,!e.unref(c).isFirst]]),e.createElementVNode("a",{class:"w-step__actions-btn",href:"javascript:;",onClick:u[2]||(u[2]=_=>e.unref(r)(_))},e.toDisplayString(h.value),1)])])],6))}}),qe={class:"w-guide"},Ye={key:0,class:"w-guide-overlay"},Fe={class:"w-guide-step"},Xe=e.defineComponent({__name:"Guide",props:{modelValue:{type:Boolean,default:!1},steps:{type:Array,default:()=>[]},mask:{type:Boolean,default:!0},direction:{type:String,validator(t){return["bottom","top","left","right"].indexOf(t)!==-1},default:"top"}},emits:["update:modelValue"],setup(t,{emit:n}){const o=t,l=e.reactive({active:0,isFirst:e.computed(()=>l.active===0),isLast:e.computed(()=>l.active===o.steps.length-1),step:e.computed(()=>o.steps[l.active])});console.log("guide state",l.active);const r=e.computed(()=>{var h;const p=document.querySelector((h=l.step)==null?void 0:h.target);if(p){p.setAttribute("data-target-highlighted","");const{top:y,left:g,right:f,bottom:u,width:_,height:k}=p.getBoundingClientRect();return{top:`${y-10*.5}px`,left:`${g-10*.5}px`,width:`${_+10}px`,height:`${k+10}px`}}}),a=()=>{l.active>=o.steps.length-1?n("update:modelValue",!1):l.active++},s=()=>{l.active!==0&&l.active--},c=()=>{n("update:modelValue",!1)};return e.provide("guide",l),(d,p)=>{const h=Ke;return e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("section",qe,[t.mask?(e.openBlock(),e.createElementBlock("div",Ye)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"w-guide-target",style:e.normalizeStyle(r.value)},null,4),e.createElementVNode("div",Fe,[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.createVNode(h,e.mergeProps({...l.step,direction:t.direction},{onSkip:p[0]||(p[0]=y=>c()),onNext:p[1]||(p[1]=y=>a()),onPrev:p[2]||(p[2]=y=>s())}),null,16)]),_:1})])],512),[[e.vShow,o.modelValue]])])}}}),it="",P=m(Xe),O=Object.freeze(Object.defineProperty({__proto__:null,WAvatar:x,WBreadcrumb:N,WBreadcrumbItem:T,WButton:B,WCollapse:C,WCollapseItem:w,WGrid:E,WGridItem:V,WGuide:P,WIcon:$,WModal:L,WTag:I},Symbol.toStringTag,{value:"Module"})),Je=Object.keys(O).map(t=>O[t]),Qe=R(Je);i.WAvatar=x,i.WBreadcrumb=N,i.WBreadcrumbItem=T,i.WButton=B,i.WCollapse=C,i.WCollapseItem=w,i.WGrid=E,i.WGridItem=V,i.WGuide=P,i.WIcon=$,i.WModal=L,i.WTag=I,i.default=Qe,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
